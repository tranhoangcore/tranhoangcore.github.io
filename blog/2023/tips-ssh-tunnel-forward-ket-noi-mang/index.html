<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.112.3">
<title>Vài Tips dùng  SSH  Tunnel Forward Kết Nối Mạng | Hoang T. Nguyen</title>


<meta property="twitter:site" content="@tranhoangcore">
<meta property="twitter:creator" content="@tranhoangcore">







  
    
  
<meta name="description" content="My blog is dedicated to exploring the world of GNU/Linux and open source software, sharing tips, tricks, tutorials, and opinions with a community of like-minded enthusiasts.">


<meta property="og:site_name" content="Hoang T. Nguyen">
<meta property="og:title" content="Vài Tips dùng  SSH  Tunnel Forward Kết Nối Mạng | Hoang T. Nguyen">
<meta property="og:description" content="My blog is dedicated to exploring the world of GNU/Linux and open source software, sharing tips, tricks, tutorials, and opinions with a community of like-minded enthusiasts." />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://tranhoangcore.github.io/blog/2023/tips-ssh-tunnel-forward-ket-noi-mang/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="https://tranhoangcore.github.io/blog/sidebar-listing.jpg" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://tranhoangcore.github.io/blog/sidebar-listing.jpg" >
    
    
  <meta itemprop="name" content="Vài Tips dùng  SSH  Tunnel Forward Kết Nối Mạng">
<meta itemprop="description" content="Bài toán: Hệ thống server của bạn được nằm tách biệt với các mạng khác nhau. Bạn cần thể hiện app của bạn cho khách hàng nhưng hiện tại không public được thông tin server. Bạn cần truy xuất bằng giao diện với một số service hoặc sử dụng tool bên thứ ba kết nối vào service đang chạy trên một server nội bộ. Chuẩn bị: Lưu ý SSH đã được cài đặt trên máy tính của bạn."><meta itemprop="datePublished" content="2023-04-04T21:47:31+07:00" />
<meta itemprop="dateModified" content="2023-04-04T21:47:31+07:00" />
<meta itemprop="wordCount" content="270">
<meta itemprop="keywords" content="" />
  
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.d83df8dada0636862889b30d4fe93ea763f478c73a6b86afca9e539f45df4ebe.css" integrity="sha256-2D342toGNoYoibMNT&#43;k&#43;p2P0eMc6a4avyp5Tn0XfTr4=" media="screen">
  
  
  <script src="/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="/main.min.3b96f1a919750fcbcb5f0f42e91e3f8b77793fc53966c9280c3ef0b9e2878b24.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://tranhoangcore.github.io/" title="Home">
      <img src="/img/logo_archlinux.png" class="dib db-l h2 w-auto" alt="Hoang T. Nguyen">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="About Me">About</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/blog/" title="Blog">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/resume/resume.pdf" title="Resume">Resume</a>
      
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Vài Tips dùng  SSH  Tunnel Forward Kết Nối Mạng</h1>
        
        <p class="f6 measure lh-copy mv1">By Hoang T. Nguyen</p>
        <p class="f7 db mv0 ttu">April 4, 2023</p>

      

      </header>
      <section class="post-body pt5 pb4">
        <p><img src="https://i.imgur.com/licssiM.png" alt="SSH Tunnel" title="https://ssh.com"></p>




<h1 id="bài-toán">Bài toán:
  <a href="#b%c3%a0i-to%c3%a1n"></a>
</h1>
<ul>
<li>Hệ thống server của bạn được nằm tách biệt với các mạng khác nhau.</li>
<li>Bạn cần thể hiện app của bạn cho khách hàng nhưng hiện tại không public được thông tin server.</li>
<li>Bạn cần truy xuất bằng giao diện với một số service hoặc sử dụng tool bên thứ ba kết nối vào service đang chạy trên một server nội bộ.</li>
</ul>




<h1 id="chuẩn-bị">Chuẩn bị:
  <a href="#chu%e1%ba%a9n-b%e1%bb%8b"></a>
</h1>
<ul>
<li>
<p>Lưu ý SSH đã được cài đặt trên máy tính của bạn.</p>
</li>
<li>
<p>Cho phép tính năng ssh tunnel trên các server.</p>
<p>Kiểm tra các thiết lập này đã có hiệu lực chưa:
<code>/etc/ssh/sshd_config</code></p>
<pre tabindex="0"><code>AllowTcpForwarding yes
GatewayPorts yes
</code></pre><p>Nếu có thay đổi hãy restart lại service: <code>sudo service sshd restart</code></p>
</li>
</ul>




<h1 id="tiến-hành">Tiến hành:
  <a href="#ti%e1%ba%bfn-h%c3%a0nh"></a>
</h1>
<ul>
<li>Hiện tại bạn có một con server với IP là <code>10.0.0.1</code> - trên này đang chạy một <code>app</code> với port là <code>3000</code>, bạn connect với <code>app</code> thông qua port <code>4000</code> trên chính máy tính của bạn. Ví dụ là <code>http://localhost:4000</code>.
Ta chạy câu lệnh sau:</li>
</ul>
<pre tabindex="0"><code>ssh -N -R 3000:localhost:4000 root@10.0.0.1
</code></pre><p>Và giờ bạn có thể truy cập được <code>app</code> thông qua <code>http://localhost:4000</code> rồi đó</p>
<ul>
<li>Nhiều hệ thống sẽ không truy cập được trực tiếp giữa máy tính của ta với trực tiếp server đang chạy, thay vào đó chúng ta thường sử dụng <em>Proxy</em> hoặc <em>Bastion</em> làm trung gian.
Ví dụ bạn có một con server IP 10.0.0.1 đang chạy Mysql với port <code>3306</code>, và một con proxy <code>10.0.0.100</code>:
Ta chạy lệnh:</li>
</ul>
<pre tabindex="0"><code>ssh -J root@10.0.0.100  -L 3306:localhost:3306 root@10.0.0.1
</code></pre><p>Ngoài ra các bạn có thể tùy biến lại để phục vụ nhu cầu hoặc tạo thêm nhiều thứ thú với hơn với SSH Tunnel.</p>

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Posted on:</dt>
    <dd class="fw5 ml0">April 4, 2023</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Length:</dt>
    <dd class="fw5 ml0">2 minute read, 270 words</dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">See Also:</dt>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
  
  
</div>

      </footer>
    </article>
    
      
<div class="post-comments pa0 pa4-l mt4">
  
  <script src="https://utteranc.es/client.js"
          repo="apreshill/apero"
          issue-term="pathname"
          theme="boxy-light"
          label="comments :crystal_ball:"
          crossorigin="anonymous"
          async
          type="text/javascript">
  </script>
  
</div>

    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2023 Hoang T. Nguyen, Vietnam
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/tranhoangcore" title="github" target="_blank" rel="me noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/tran.hoang.nth/" title="camera" target="_blank" rel="me noopener">
      <i class="fas fa-camera fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://twitter.com/tranhoangcore" title="hashtag" target="_blank" rel="me noopener">
      <i class="fas fa-hashtag fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://linkedin.com/in/tranhoangcore" title="linkedin-in" target="_blank" rel="me noopener">
      <i class="fab fa-linkedin-in fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/blog/index.xml" title="rss" >
      <i class="fas fa-rss fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/license/" title="License">License</a>
      
      <a class="dib pv1 ph2 link" href="/contact/" title="Contact form">Contact</a>
      
      <a class="dib pv1 ph2 link" href="/contributors/" title="Contributors">Contributors</a>
      
    </div>
  </nav>
  
</footer>

      </div>
    </body>
</html>
